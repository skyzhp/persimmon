webpackJsonp([9],{394:function(t,e,o){"use strict";function n(t){o(484)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(417),a=o.n(i);for(var r in i)"default"!==r&&function(t){o.d(e,t,function(){return i[t]})}(r);var l=o(486),s=o.n(l),c=o(6),m=n,u=c(a.a,s.a,!1,m,null,null);e.default=u.exports},417:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(19),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){var t=this;return{tableColumns:[{type:"selection",width:60,align:"center"},{title:"配置项说明",key:"option_title"},{title:"配置项名称",key:"option_name"},{title:"配置分组",key:"option_group"},{title:"配置项备注",key:"option_remark"},{title:"日期",key:"created_at",render:function(t,e){return t("span",i.default.timeFormat(e.row.created_at))}},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleEdit(o.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.handleDistory("one",o.row)}}},"删除")])}}],listData:[],currentPage:1,total:0,pageSize:20,myForm:{id:0,option_title:"",option_name:"",option_value:"",option_group:"",option_remark:""},myRules:{option_title:[{required:!0,type:"string",message:"请填写配置项说明",trigger:"blur"}],option_name:[{required:!0,type:"string",message:"请填写配置项名称",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"只允许英文或者拼音,横杠(-)",trigger:"blur"}]},editFormVisible:!1,editFormLoading:!1,listLoading:!1,myFormTitle:"编辑",checkedAll:[],sizeOpts:[10,20,30,40,50,60,70,80,90,100]}},methods:{getData:function(){var t=this;t.listLoading=!0,i.default.ajax.get("/backend/options",{params:{rows:this.pageSize}}).then(function(e){var o=e.data;200==o.status?(t.listData=o.list.data,t.total=o.list.total,t.currentPage=o.list.current_page,t.listLoading=!1):t.$Notice.open({title:"数据获取失败",desc:""})}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t},handleCreate:function(){var t=this;t.myFormTitle="新增",t.myForm.id=0,t.editFormVisible=!0},handleEdit:function(t){var e=this;e.editFormLoading=!0,e.myFormTitle="编辑",e.editFormVisible=!0,i.default.ajax.get("/backend/options/"+t.id).then(function(t){var o=t.data;200==o.status?e.myForm=o.item:e.$Notice.open({title:"数据获取失败",desc:""}),e.editFormLoading=!1}).catch(function(t){console.log(t),e.editFormLoading=!1})},handleDistory:function(t,e){var o=this,n={};switch(t){case"one":if(parseInt(e.id)<=0)return o.$Notice.open({title:"请选择需要删除的数据",desc:""}),!1;n={ids:[e.id]};break;case"multi":var a=i.default.getIdByArr(o.checkedAll);if(a.length<=0)return o.$Notice.open({title:"请选择需要删除的数据",desc:""}),!1;n={ids:a}}o.$Modal.confirm({title:"确认删除选中的记录吗?",content:"<p>您确认删除选中的记录吗?</p>",onOk:function(){o.listLoading=!0,i.default.ajax.post("/backend/options/destroy",i.default.stringify(n)).then(function(n){o.listLoading=!1;var a=n.data;if(o.$Notice.open({title:200==a.status?"删除成功":"删除失败",desc:""}),"one"==t)i.default.removeByValue(o.listData,e.id);else for(var r in o.checkedAll)i.default.removeByValue(o.listData,o.checkedAll[r].id)}).catch(function(t){console.log(t)})},onCancel:function(){o.listLoading=!1}})},submitMyForm:function(){var t=this;t.$refs.myForm.validate(function(e){if(!e)return console.log("myForm valid error."),!1;t.myForm.id>0?i.default.ajax.post("/backend/options/update",i.default.stringify(t.myForm)).then(function(e){var o=e.data;t.$Notice.open({title:200==o.status?"编辑成功":"编辑失败",desc:""}),200==o.status&&(t.closeForm("myForm"),t.getData())}).catch(function(t){console.log(t)}):i.default.ajax.post("/backend/options/store",i.default.stringify(t.myForm)).then(function(e){var o=e.data;200==o.status&&(t.closeForm("myForm"),t.getData()),t.$Notice.open({title:200==o.status?"新增成功":"新增失败",desc:""})}).catch(function(e){if(e.response){if(422==e.response.status)for(var o in e.response.data)t.$notify({title:"警告",message:e.response.data[o][0]})}else console.log(e)})})},closeForm:function(){this.editFormVisible=!1,this.$refs.myForm.resetFields(),this.myForm={id:0,name:"",url:"",logo:"",group:""},console.log("closeForm")},selectRow:function(t){this.checkedAll=t},selectAll:function(t){this.checkedAll=t}},watch:{},mounted:function(){this.getData()}}},484:function(t,e,o){var n=o(485);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(23)("80e8d096",n,!0,{})},485:function(t,e,o){e=t.exports=o(22)(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},486:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pit-content"},[o("div",{staticClass:"pit-action-btn"},[o("Button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),o("Button",{attrs:{type:"primary",icon:"delete"},on:{click:function(e){t.handleDistory("multi",{})}}},[t._v("删除")])],1),t._v(" "),o("div",{staticClass:"data-list"},[o("Table",{attrs:{loading:t.listLoading,columns:t.tableColumns,data:t.listData,stripe:""},on:{"on-select":t.selectRow,"on-select-all":t.selectAll}})],1),t._v(" "),o("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[o("div",{staticStyle:{float:"right"}},[o("Page",{staticClass:"myp-page",attrs:{total:t.total,"page-size":t.pageSize,current:t.currentPage,"page-size-opts":t.sizeOpts,"show-elevator":!0,"show-sizer":!0},on:{"on-page-size-change":t.handleSizeChange,"on-change":t.handleCurrentChange}})],1)]),t._v(" "),o("Modal",{attrs:{title:t.myFormTitle},on:{"on-ok":t.submitMyForm,"on-cancel":t.closeForm},model:{value:t.editFormVisible,callback:function(e){t.editFormVisible=e},expression:"editFormVisible"}},[o("div",{staticClass:"pit-dialog-edit-form"},[o("Form",{ref:"myForm",staticClass:"myForm",staticStyle:{width:"80%"},attrs:{rules:t.myRules,"label-width":100,model:t.myForm}},[o("FormItem",{attrs:{label:"配置项说明",prop:"option_title"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.option_title,callback:function(e){t.$set(t.myForm,"option_title",e)},expression:"myForm.option_title"}})],1),t._v(" "),o("FormItem",{attrs:{label:"配置项名称",prop:"option_name"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.option_name,callback:function(e){t.$set(t.myForm,"option_name",e)},expression:"myForm.option_name"}})],1),t._v(" "),o("FormItem",{attrs:{label:"配置项值"}},[o("Input",{attrs:{type:t.myForm.data_type,autosize:"textarea"==t.myForm.data_type,"auto-complete":"off"},model:{value:t.myForm.option_value,callback:function(e){t.$set(t.myForm,"option_value",e)},expression:"myForm.option_value"}})],1),t._v(" "),o("FormItem",{attrs:{label:"配置分组"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.option_group,callback:function(e){t.$set(t.myForm,"option_group",e)},expression:"myForm.option_group"}})],1),t._v(" "),o("FormItem",{attrs:{label:"配置项备注"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},"auto-complete":"off"},model:{value:t.myForm.option_remark,callback:function(e){t.$set(t.myForm,"option_remark",e)},expression:"myForm.option_remark"}})],1),t._v(" "),t.myForm.id?o("FormItem",[o("Input",{staticStyle:{display:"none"},model:{value:t.myForm.id,callback:function(e){t.$set(t.myForm,"id",e)},expression:"myForm.id"}})],1):t._e()],1),t._v(" "),t.editFormLoading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])],1)},i=[],a={render:n,staticRenderFns:i};e.default=a}});