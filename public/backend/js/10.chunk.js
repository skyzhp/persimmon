webpackJsonp([10],{392:function(t,e,o){"use strict";function i(t){o(478)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(415),n=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);var l=o(480),s=o.n(l),c=o(6),u=i,m=c(n.a,s.a,!1,u,null,null);e.default=m.exports},415:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(19),a=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){var t=this;return{listData:[],categorys:[],currentPage:1,total:0,pageSize:20,myForm:{id:0,name:"",url:"",logo:"",group:""},myRules:{name:[{required:!0,type:"string",message:"请填写链接名称",trigger:"blur"}],url:[{required:!0,type:"string",message:"请填写链接地址",trigger:"blur"}]},editFormVisible:!1,editFormLoading:!1,listLoading:!1,myFormTitle:"编辑",checkedAll:[],sizeOpts:[10,20,30,40,50,60,70,80,90,100],tableColumns:[{type:"selection",width:60,align:"center"},{title:"名称",key:"name"},{title:"地址",key:"url",render:function(t,e){return t("a",{attrs:{href:e.row.url,target:"_blank"}},e.row.url)}},{title:"Logo",key:"logo",render:function(t,e){return t("img",{attrs:{src:e.row.logo},style:{width:"100px"}})}},{title:"日期",key:"created_at",render:function(t,e){return t("span",a.default.timeFormat(e.row.created_at))}},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleEdit(o.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.handleDistory("one",o.row)}}},"删除")])}}]}},methods:{getData:function(){var t=this;t.listLoading=!0,a.default.ajax.get("/backend/links",{params:{rows:t.pageSize,page:this.currentPage}}).then(function(e){var o=e.data;200==o.status?(t.listData=o.list.data,t.total=o.list.total,t.currentPage=o.list.current_page,t.listLoading=!1):t.$Notice.open({title:"数据获取失败",desc:""})}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleCreate:function(){var t=this;t.myFormTitle="新增",t.myForm.id=0,t.editFormVisible=!0},handleEdit:function(t){var e=this;e.editFormLoading=!0,e.myFormTitle="编辑",e.editFormVisible=!0,a.default.ajax.get("/backend/links/"+t.id).then(function(t){var o=t.data;200==o.status?e.myForm=o.item:e.$Notice.open({title:"数据获取失败",desc:""}),e.editFormLoading=!1}).catch(function(t){console.log(t),e.editFormLoading=!1})},handleDistory:function(t,e){var o=this,i={};switch(t){case"one":if(parseInt(e.id)<=0)return o.$Notice.open({title:"请选择需要删除的数据",desc:""}),!1;i={ids:[e.id]};break;case"multi":var n=o.util.getIdByArr(o.checkedAll);if(n.length<=0)return o.$Notice.warning({title:"请选择需要删除的数据",desc:""}),!1;i={ids:n}}o.$Modal.confirm({title:"确认删除选中的记录吗?",content:"<p>您确认删除选中的记录吗?</p>",onOk:function(){o.listLoading=!0,a.default.ajax.post("/backend/links/destroy",a.default.stringify(i)).then(function(i){o.listLoading=!1;var a=i.data;if(o.$Notice.warning({title:200==a.status?"删除成功":"删除失败",desc:""}),"one"==t)o.util.removeByValue(o.listData,e.id);else for(var n in o.checkedAll)o.util.removeByValue(o.listData,o.checkedAll[n].id)}).catch(function(t){console.log(t)})},onCancel:function(){o.listLoading=!1}})},submitMyForm:function(){var t=this;t.$refs.myForm.validate(function(e){if(!e)return console.log("myForm valid error."),!1;t.myForm.id>0?a.default.ajax.post("/backend/links/update",t.myForm).then(function(e){var o=e.data;t.$Notice.warning({title:200==o.status?"编辑成功":"编辑失败",desc:""}),200==o.status&&(t.closeForm("myForm"),t.getData())}).catch(function(t){console.log(t)}):a.default.ajax.post("/backend/links",t.myForm).then(function(e){var o=e.data;200==o.status&&(t.closeForm("myForm"),t.getData()),t.$Notice.open({title:200==o.status?"新增成功":"新增失败",desc:""})}).catch(function(e){if(e.response){if(422==e.response.status)for(var o in e.response.data)t.$Notice.warning({title:"警告",desc:e.response.data[o][0]})}else console.log(e)})})},closeForm:function(){this.editFormVisible=!1,this.$refs.myForm.resetFields(),this.myForm={id:0,name:"",url:"",logo:"",group:""},console.log("closeForm")},selectRow:function(t){this.checkedAll=t},selectAll:function(t){this.checkedAll=t}},watch:{},mounted:function(){this.getData()}}},478:function(t,e,o){var i=o(479);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(23)("7501334e",i,!0,{})},479:function(t,e,o){e=t.exports=o(22)(!1),e.push([t.i,"\n.links {\n    text-decoration: none;\n    color: #000\n}\n",""])},480:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pit-content"},[o("div",{staticClass:"pit-action-btn"},[o("Button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleCreate}},[t._v("新增")]),t._v(" "),o("Button",{attrs:{type:"primary",icon:"delete"},on:{click:function(e){t.handleDistory("multi",{})}}},[t._v("删除")])],1),t._v(" "),o("div",{staticClass:"data-list"},[o("Table",{attrs:{loading:t.listLoading,columns:t.tableColumns,data:t.listData,stripe:""},on:{"on-select":t.selectRow,"on-select-all":t.selectAll}})],1),t._v(" "),o("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[o("div",{staticStyle:{float:"right"}},[o("Page",{staticClass:"myp-page",attrs:{total:t.total,"page-size":t.pageSize,current:t.currentPage,"page-size-opts":t.sizeOpts,"show-elevator":!0,"show-sizer":!0},on:{"on-page-size-change":t.handleSizeChange,"on-change":t.handleCurrentChange}})],1)]),t._v(" "),o("Modal",{attrs:{title:t.myFormTitle},on:{"on-ok":t.submitMyForm,"on-cancel":t.closeForm},model:{value:t.editFormVisible,callback:function(e){t.editFormVisible=e},expression:"editFormVisible"}},[o("div",{staticClass:"pit-dialog-edit-form"},[o("Form",{ref:"myForm",staticClass:"myForm",attrs:{rules:t.myRules,"label-width":100,model:t.myForm}},[o("FormItem",{attrs:{label:"名称",prop:"name"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.name,callback:function(e){t.$set(t.myForm,"name",e)},expression:"myForm.name"}})],1),t._v(" "),o("FormItem",{attrs:{label:"链接",prop:"url"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.url,callback:function(e){t.$set(t.myForm,"url",e)},expression:"myForm.url"}})],1),t._v(" "),o("FormItem",{attrs:{label:"Logo"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.logo,callback:function(e){t.$set(t.myForm,"logo",e)},expression:"myForm.logo"}})],1),t._v(" "),o("FormItem",{attrs:{label:"分组"}},[o("Input",{attrs:{"auto-complete":"off"},model:{value:t.myForm.group,callback:function(e){t.$set(t.myForm,"group",e)},expression:"myForm.group"}})],1),t._v(" "),t.myForm.id?o("FormItem",[o("Input",{staticStyle:{display:"none"},model:{value:t.myForm.id,callback:function(e){t.$set(t.myForm,"id",e)},expression:"myForm.id"}})],1):t._e()],1),t._v(" "),t.editFormLoading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])],1)},a=[],n={render:i,staticRenderFns:a};e.default=n}});